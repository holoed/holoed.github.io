<!doctype html>
  <html>
    <head>
      <meta http-equiv="Cache-control" content="no-cache">
      <link rel="stylesheet" href="javascripts/xterm/dist/xterm.css" />
      <script src="javascripts/xterm/dist/xterm.js"></script>
      <script src="javascripts/systemjs/dist/system.js"></script>
    </head>
    <body>
      <div id="terminal"></div>
      <script>
       SystemJS.import('./javascripts/CodeV4/Externals.js');
       SystemJS.import('./javascripts/CodeV4/Base.js');
       SystemJS.import('./javascripts/CodeV4/Parser.js').then(function (parser) {

       var term = new Terminal({
          cursorBlink: true,  // Do not blink the terminal's cursor
          cols: 120,  // Set the terminal's width to 120 columns
          rows: 80  // Set the terminal's height to 80 rows
          });
        term.open(document.getElementById('terminal'));

        var shellprompt = ' junior> ';

        term.prompt = function () {
          term.write('\r\n' + shellprompt);
        };

        term.prompt();
        term.on('key', function (key, ev) {
            var printable = (
              !ev.altKey && !ev.altGraphKey && !ev.ctrlKey && !ev.metaKey
            );

            if (ev.keyCode == 13) {
              term.writeln('')
              term.write("Working on it ;-)")
              term.prompt();
            } else if (ev.keyCode == 8) {
             // Do not delete the prompt
              if (term.buffer.x > shellprompt.length) {
                term.write('\b \b');
              }
            } else if (printable) {
              term.write(key);
            }
          });

          console.log("This is the parser " + parser.progP)
        });
      </script>
    </body>
  </html>
